<!doctype html>
<html lang="tr">
<head>
  <!-- Google Fonts: Inter (TR uyumlu, latin-ext) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap&subset=latin-ext" rel="stylesheet">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>İlan Detayı | Eskisini Ver Yenisini Al</title>

  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/fav.css">
  <style>
    /* Detay sayfasında butonlar olası overlay'lerin altında kalmasın */
    .actions .btn, .card-actions .btn { position: relative; z-index: 2; }
    .fav-btn { position: relative; z-index: 2; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <div data-include="partials/header.html"></div>

  <!-- CONTENT -->
  <main class="container section">
    <div id="detail" class="listing card">
      <div class="media">
        <img id="img" src="/assets/placeholder.png" alt="" style="width:100%;max-height:360px;object-fit:cover;border-radius:12px">
      </div>
      <div class="pad">
        <h1 id="title" style="margin:8px 0 6px">Yükleniyor…</h1>
        <div id="meta" class="muted"></div>
        <div id="price" class="price" style="font-size:22px;font-weight:700;margin:8px 0 14px"></div>

        <div class="card-actions actions" style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" id="msgBtn" type="button">Satıcıya Mesaj</button>

          <span class="fav-count" id="favCount">0</span>
          <button class="fav-btn" id="favBtn" data-listing-id="" aria-label="Favoriye ekle/çıkar">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path class="heart" d="M12 21s-6.7-4.35-9.33-7C.34 11.64.63 8.39 3 6.67A5.09 5.09 0 0 1 12 8a5.09 5.09 0 0 1 9-1.33C23.37 8.39 23.66 11.64 21.33 14 18.7 16.65 12 21 12 21z"/>
            </svg>
          </button>

          <!-- Satın Al: buy.js delegation yakalar -->
          <button id="btnBuy" class="btn primary" type="button">Satın Al</button>
        </div>

        <article id="desc" style="margin-top:14px"></article>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <div data-include="partials/footer.html"></div>

  <!-- SCRIPTS (doğru sıra) -->
  <script src="/js/partials.js"></script>
  <script src="/js/config.js"></script>

  <!-- Favoriler için -->
  <script src="/js/fav.js"></script>

  <!-- Genel oturum/header -->
  <script src="/js/auth.js"></script>
  <script src="/js/session.js"></script>
  <script src="/js/header.js"></script>

  <!-- Satın alma delegasyonu -->
  <script src="/js/buy.js"></script>

  <!-- Sayfa mantığı (detay yükleme, fav hydrate, mesaj başlatma) -->
  <script src="/js/listing.js"></script>

  <script>
    includePartials();
  </script>
</body>
</html>
